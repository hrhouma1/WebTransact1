--------------------------------
# 1 - Rappel des deux classes **Customer** et **Card** avec les relations de clé primaire (PK) et clé étrangère (FK) :
--------------------------------


```
+--------------------------+             +--------------------------+
|        Customer           |             |          Card             |
+--------------------------+             +--------------------------+
| - customerId (PK)         | <-----------| - cardId (PK)             |
| - customerFirstName       |             | - customerId (FK)         |
| - customerLastName        |             | - cardNumber              |
+--------------------------+             | - cardType                |
                                          | - totalLimit              |
                                          | - amountUsed              |
                                          | - availableAmount         |
                                          | - createDt                |
                                          +--------------------------+
```

- **Customer** : La classe `Customer` contient `customerId` comme clé primaire (PK).
- **Card** : La classe `Card` contient `cardId` comme clé primaire (PK) et `customerId` comme clé étrangère (FK) qui fait référence à `Customer`.

- Relation entre un client et ses cartes, où un client peut avoir plusieurs cartes.


-------------------------------------------------
# 2 - Contraintes d'intégrité :
-------------------------------------------------


## Contrainte d'Intégrité pour les CRUDs

| Fonctionnalité       | Entité     | Point de terminaison         | Contrainte                  | Description                                |
|----------------------|------------|------------------------------|-----------------------------|--------------------------------------------|
| **Create**           | Customer   | POST /customers/add           | N/A                         | Ajoute un nouveau client                  |
|                      | Card       | POST /cards/add               | Client doit exister          | Impossible d'ajouter une carte sans client |
|                      | Card       | POST /cards/add               | Numéro de carte unique       | Le numéro de carte doit être unique        |
| **Read**             | Customer   | GET /customers/{id}           | ID valide                   | 404 si client inexistant                   |
|                      | Card       | GET /cards/{id}               | ID valide                   | 404 si carte inexistante                  |
| **Update**           | Customer   | PUT /customers/update/{id}    | ID valide                   | 404 si client inexistant                   |
|                      | Card       | PUT /cards/update/{id}        | Client doit exister          | 404 si client ou carte inexistant          |
|                      | Card       | PUT /cards/update/{id}        | Conserver associations       | Les cartes doivent rester liées au client  |
| **Delete**           | Customer   | DELETE /customers/delete/{id} | Client avec cartes          | Ne peut pas supprimer un client avec cartes|
|                      | Customer   | DELETE /customers/delete/{id} | Suppression en cascade       | Supprimer client avec ses cartes (option)  |
|                      | Card       | DELETE /cards/delete/{id}     | N/A                         | Supprime une carte                        |
| **Intégrité Référentielle** | Card | N/A                          | Clé étrangère               | Client lié à la carte                     |
| **Unicité**          | Card       | N/A                          | Numéro de carte unique       | Le numéro de carte est unique              |
| **Validation des Données** | Card | N/A                          | Valeurs positives            | Limite, montant utilisé et disponible > 0  |
|                      | Card       | N/A                          | Cohérence des montants       | Montant disponible = Limite - Montant utilisé |
| **Erreurs**          | Card/Customer| N/A                        | Gestion des erreurs          | 404 pour ID invalide, 400 pour validation  |
```

### Explication des colonnes ajoutées :
- **Entité** : Indique s'il s'agit de l'entité **Customer** ou **Card**.
- **Point de terminaison** : Spécifie le point de terminaison associé à la fonctionnalité CRUD.

