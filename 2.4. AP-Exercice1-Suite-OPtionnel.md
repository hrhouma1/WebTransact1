# üìò Application Pratique : Exercice 1 - suite OPTIONNELLE 

## Comprendre et impl√©menter un contr√¥leur REST pour la gestion des clients

## Introduction

Ce projet vise √† vous familiariser avec l'impl√©mentation d'un **contr√¥leur REST** en **Spring Boot**, tout en utilisant des donn√©es **en m√©moire**. Dans cet exercice, vous ne serez pas amen√©s √† impl√©menter une base de donn√©es. L'objectif est de manipuler une **liste en m√©moire** afin de comprendre les m√©canismes de base du REST avant de passer √† des projets plus complexes.

Ce projet est une pr√©paration pour comprendre comment un contr√¥leur REST fonctionne dans Spring Boot. Dans une prochaine √©tape, nous allons refaire cet exercice avec **JPA** et une **base de donn√©es** pour une gestion plus robuste des entit√©s.

---

## Diagramme et repr√©sentation ASCII

### Repr√©sentation en ASCII de la classe `Customer`

```
+--------------------------+
|        Customer           |
+--------------------------+
| - customerId : int        |
| - customerLastName : String|
| - customerFirstName : String|
+--------------------------+
| + getCustomerId() : int   |
| + setCustomerId(int)      |
| + getCustomerLastName() : String|
| + setCustomerLastName(String)|
| + getCustomerFirstName() : String|
| + setCustomerFirstName(String)|
+--------------------------+
```

### Diagramme d'interaction

Voici un diagramme simple qui montre l'interaction entre le contr√¥leur `CustomerController` et la classe `Customer` :

```
+----------------------+       +----------------------+
|  CustomerController  |       |      Customer         |
+----------------------+       +----------------------+
|                      |       | - customerId          |
| - getAllCustomers()   | ----> | - customerLastName    |
| - getCustomerById(id) | ----> | - customerFirstName   |
| - createCustomer()    | <---- |                      |
| - updateCustomer(id)  | <---- |                      |
| - deleteCustomer(id)  | ----> |                      |
| - deleteAllCustomers()| ----> |                      |
+----------------------+       +----------------------+
```

---

## Instructions pour l'impl√©mentation de la gestion des clients

### Objectif du projet

Ce projet consiste √† **impl√©menter un contr√¥leur REST pour g√©rer les clients**. Les clients seront stock√©s dans une **liste en m√©moire**, et vous n'aurez pas besoin d'utiliser une base de donn√©es. Cet exercice est con√ßu pour vous aider √† comprendre les concepts de base d'un service REST en Spring Boot. Vous impl√©menterez les op√©rations CRUD (Create, Read, Update, Delete).

#### Note importante : 

- Ce projet est **ind√©pendant** et **pr√©paratoire**.
- Dans la prochaine √©tape, nous referons tout cela avec **JPA** et une base de donn√©es pour renforcer vos connaissances.

---

### √âtape 1 : G√©n√©rer le projet Spring Boot

1. Allez sur [Spring Initializr](https://start.spring.io/).
2. Configurez votre projet :
   - Group : `com.exemple`
   - Artifact : `demo`
   - Name : `customer-rest`
   - Packaging : `Jar`
   - Java : 17 (ou la version compatible avec votre environnement)
3. Ajoutez la d√©pendance **Spring Web**.
4. Cliquez sur **Generate** et t√©l√©chargez le fichier ZIP. D√©compressez-le et ouvrez le projet dans votre IDE favori.

---

### √âtape 2 : Impl√©menter la classe `Customer`

Dans le dossier `src/main/java/com/exemple/demo/model/`, cr√©ez la classe `Customer` qui repr√©sentera un client avec les champs suivants : `customerId`, `customerLastName`, `customerFirstName`.

```java
package com.exemple.demo.model;

public class Customer {

    private int customerId;
    private String customerLastName;
    private String customerFirstName;

    // Constructeurs
    public Customer() {
    }

    public Customer(String customerLastName, String customerFirstName) {
        this.customerLastName = customerLastName;
        this.customerFirstName = customerFirstName;
    }

    // Getters et Setters
    public int getCustomerId() {
        return customerId;
    }

    public void setCustomerId(int customerId) {
        this.customerId = customerId;
    }

    public String getCustomerLastName() {
        return customerLastName;
    }

    public void setCustomerLastName(String customerLastName) {
        this.customerLastName = customerLastName;
    }

    public String getCustomerFirstName() {
        return customerFirstName;
    }

    public void setCustomerFirstName(String customerFirstName) {
        this.customerFirstName = customerFirstName;
    }
}
```

---

### √âtape 3 : Cr√©er et tester le contr√¥leur `CustomerController`

Dans le dossier `src/main/java/com/exemple/demo/controller/`, cr√©ez un contr√¥leur `CustomerController` qui g√©rera les requ√™tes HTTP pour effectuer des op√©rations CRUD sur les clients. Vous utiliserez une simple **liste en m√©moire** pour stocker les clients.

Voici le contr√¥leur complet :

```java
package com.exemple.demo.controller;

import com.exemple.demo.model.Customer;
import org.springframework.web.bind.annotation.*;

import java.util.ArrayList;
import java.util.List;
import java.util.Optional;

@RestController
@RequestMapping("/customers")
public class CustomerController {

    private List<Customer> customers = new ArrayList<>();
    private int idCounter = 1;

    // GET /customers
    @GetMapping
    public List<Customer> getAllCustomers() {
        return customers;
    }

    // GET /customers/{id}
    @GetMapping("/{id}")
    public Customer getCustomerById(@PathVariable int id) {
        return customers.stream()
                .filter(c -> c.getCustomerId() == id)
                .findFirst()
                .orElse(null);
    }

    // POST /customers
    @PostMapping
    public Customer createCustomer(@RequestBody Customer customer) {
        customer.setCustomerId(idCounter++);
        customers.add(customer);
        return customer;
    }

    // PUT /customers/{id}
    @PutMapping("/{id}")
    public Customer updateCustomer(@PathVariable int id, @RequestBody Customer updatedCustomer) {
        Optional<Customer> customerOptional = customers.stream()
                .filter(c -> c.getCustomerId() == id)
                .findFirst();

        if (customerOptional.isPresent()) {
            Customer customer = customerOptional.get();
            customer.setCustomerLastName(updatedCustomer.getCustomerLastName());
            customer.setCustomerFirstName(updatedCustomer.getCustomerFirstName());
            return customer;
        }
        return null;
    }

    // DELETE /customers/{id}
    @DeleteMapping("/{id}")
    public void deleteCustomer(@PathVariable int id) {
        customers.removeIf(c -> c.getCustomerId() == id);
    }

    // DELETE /customers
    @DeleteMapping
    public void deleteAllCustomers() {
        customers.clear();
    }
}
```

---

### √âtape 4 : Tester l'API avec un fichier HTTP

Pour tester les diff√©rentes routes de votre contr√¥leur, vous pouvez utiliser un fichier `.http` ou un outil comme **Postman**. Voici un exemple de fichier `testCustomer.http` :

```http
### R√©cup√©rer tous les clients
GET http://localhost:8080/customers
Accept: application/json

###

### Ajouter un nouveau client
POST http://localhost:8080/customers
Content-Type: application/json

{
  "customerLastName": "Dupont",
  "customerFirstName": "Jean"
}

###

### R√©cup√©rer un client par son ID
GET http://localhost:8080/customers/1
Accept: application/json

###

### Modifier un client existant
PUT http://localhost:8080/customers/1
Content-Type: application/json

{
  "customerLastName": "Martin",
  "customerFirstName": "Jean"
}

###

### Supprimer un client par son ID
DELETE http://localhost:8080/customers/1

###

### Supprimer tous les clients
DELETE http://localhost:8080/customers
```

---

## Conclusion

Vous venez de cr√©er un projet Spring Boot simple avec un contr√¥leur REST pour la gestion des clients **en m√©moire**. Cet exercice vous aide √† mieux comprendre comment fonctionne un **contr√¥leur REST** et comment manipuler des donn√©es en m√©moire sans utiliser de base de donn√©es.

Dans la prochaine √©tape, nous r√©impl√©menterons ce projet avec **JPA** et une **base de donn√©es relationnelle**, ce qui vous permettra d'approfondir vos connaissances sur les relations entre entit√©s et les op√©rations de persistance des donn√©es.

Il n'est **pas n√©cessaire d'impl√©menter la classe `Card` pour ce projet**. Nous nous concentrerons uniquement sur la gestion des clients pour cette √©tape.

### Ce que vous devez me fournir :

1. Le fichier ZIP contenant le projet Spring Boot complet.
2. Des captures d'√©cran montrant vos tests de l'API avec Postman ou un fichier `.http`.
